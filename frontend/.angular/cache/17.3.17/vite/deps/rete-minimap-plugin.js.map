{
  "version": 3,
  "sources": ["../../../../../node_modules/rete-minimap-plugin/rete-minimap-plugin.esm.js"],
  "sourcesContent": ["/*!\n* rete-minimap-plugin v2.0.2\n* (c) 2024 Vitaliy Stoliarov\n* Released under the MIT license.\n* */\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport _get from '@babel/runtime/helpers/get';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { NodeEditor, Scope } from 'rete';\nimport { AreaPlugin } from 'rete-area-plugin';\n\nfunction nodesBoundingBox(nodes) {\n  var lefts = nodes.map(function (n) {\n    return n.left;\n  });\n  var rights = nodes.map(function (n) {\n    return n.left + n.width;\n  });\n  var tops = nodes.map(function (n) {\n    return n.top;\n  });\n  var bottoms = nodes.map(function (n) {\n    return n.top + n.height;\n  });\n  var left = Math.min.apply(Math, _toConsumableArray(lefts)),\n    right = Math.max.apply(Math, _toConsumableArray(rights)),\n    top = Math.min.apply(Math, _toConsumableArray(tops)),\n    bottom = Math.max.apply(Math, _toConsumableArray(bottoms));\n  return {\n    left: left,\n    right: right,\n    top: top,\n    bottom: bottom,\n    width: right - left,\n    height: bottom - top\n  };\n}\n\nfunction useBoundingCoordinateSystem(rects, minDistance, ratio) {\n  var boundingBox = nodesBoundingBox(rects);\n  var distance = Math.max(minDistance, Math.max(boundingBox.width, boundingBox.height * ratio));\n  var originX = (distance - boundingBox.width) / 2 - boundingBox.left;\n  var originY = (distance / ratio - boundingBox.height) / 2 - boundingBox.top;\n  var scale = function scale(v) {\n    return v / distance;\n  };\n  var invert = function invert(v) {\n    return v * distance;\n  };\n  return {\n    origin: {\n      x: originX,\n      y: originY\n    },\n    scale: scale,\n    invert: invert\n  };\n}\n\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _superPropGet(t, e, o, r) { var p = _get(_getPrototypeOf(1 & r ? t.prototype : t), e, o); return 2 & r && \"function\" == typeof p ? function (t) { return p.apply(o, t); } : p; }\n\n/**\n * Extra signal types for minimap rendering\n * @priority 10\n */\n\n/**\n * Minimap plugin, triggers rendering of the minimap\n * @priority 9\n * @listens nodetranslated\n * @listens nodecreated\n * @listens noderemoved\n * @listens translated\n * @listens resized\n * @listens noderesized\n * @listens zoomed\n * @emits render\n */\nvar MinimapPlugin = /*#__PURE__*/function (_Scope) {\n  /**\n   * @constructor\n   * @param props Plugin properties\n   * @param props.ratio minimap ratio. Default is `1`\n   * @param props.minDistance minimap minimum distance. Default is `2000`\n   * @param props.boundViewport whether to bound the mini-viewport to the minimap. Default is `false`\n   */\n  function MinimapPlugin(props) {\n    var _this$props$ratio, _this$props, _this$props$minDistan, _this$props2, _this$props3;\n    var _this;\n    _classCallCheck(this, MinimapPlugin);\n    _this = _callSuper(this, MinimapPlugin, ['minimap']);\n    _this.props = props;\n    _this.ratio = (_this$props$ratio = (_this$props = _this.props) === null || _this$props === void 0 ? void 0 : _this$props.ratio) !== null && _this$props$ratio !== void 0 ? _this$props$ratio : 1;\n    _this.minDistance = (_this$props$minDistan = (_this$props2 = _this.props) === null || _this$props2 === void 0 ? void 0 : _this$props2.minDistance) !== null && _this$props$minDistan !== void 0 ? _this$props$minDistan : 2000;\n    _this.boundViewport = Boolean((_this$props3 = _this.props) === null || _this$props3 === void 0 ? void 0 : _this$props3.boundViewport);\n    return _this;\n  }\n  _inherits(MinimapPlugin, _Scope);\n  return _createClass(MinimapPlugin, [{\n    key: \"setParent\",\n    value: function setParent(scope) {\n      var _this2 = this;\n      _superPropGet(MinimapPlugin, \"setParent\", this, 3)([scope]);\n      this.area = this.parentScope(AreaPlugin);\n      this.editor = this.area.parentScope(NodeEditor);\n      this.element = document.createElement('div');\n      this.area.container.appendChild(this.element);\n\n      // eslint-disable-next-line complexity\n      this.addPipe(function (context) {\n        if (!('type' in context)) return context;\n        if (context.type === 'render' && context.data.type === 'node') {\n          _this2.render();\n        } else if (context.type === 'nodetranslated') {\n          _this2.render();\n        } else if (context.type === 'nodecreated') {\n          _this2.render();\n        } else if (context.type === 'noderemoved') {\n          _this2.render();\n        } else if (context.type === 'translated') {\n          _this2.render();\n        } else if (context.type === 'resized') {\n          _this2.render();\n        } else if (context.type === 'noderesized') {\n          _this2.render();\n        } else if (context.type === 'zoomed') {\n          _this2.render();\n        }\n        return context;\n      });\n    }\n  }, {\n    key: \"getNodesRect\",\n    value: function getNodesRect() {\n      var _this3 = this;\n      return this.editor.getNodes().map(function (node) {\n        var view = _this3.area.nodeViews.get(node.id);\n        if (!view) return null;\n        return {\n          width: node.width,\n          height: node.height,\n          left: view.position.x,\n          top: view.position.y\n        };\n      }).filter(Boolean);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n      var parent = this.parentScope();\n      var nodes = this.getNodesRect();\n      var transform = this.area.area.transform;\n      var _this$area$container = this.area.container,\n        width = _this$area$container.clientWidth,\n        height = _this$area$container.clientHeight;\n      var minDistance = this.minDistance,\n        ratio = this.ratio;\n      var viewport = {\n        left: -transform.x / transform.k,\n        top: -transform.y / transform.k,\n        width: width / transform.k,\n        height: height / transform.k\n      };\n      var rects = this.boundViewport ? [].concat(_toConsumableArray(nodes), [viewport]) : nodes;\n      var _useBoundingCoordinat = useBoundingCoordinateSystem(rects, minDistance, ratio),\n        origin = _useBoundingCoordinat.origin,\n        scale = _useBoundingCoordinat.scale,\n        invert = _useBoundingCoordinat.invert;\n      void parent.emit({\n        type: 'render',\n        data: {\n          type: 'minimap',\n          element: this.element,\n          ratio: ratio,\n          start: function start() {\n            return transform;\n          },\n          nodes: nodes.map(function (node) {\n            return {\n              left: scale(node.left + origin.x),\n              top: scale(node.top + origin.y),\n              width: scale(node.width),\n              height: scale(node.height)\n            };\n          }),\n          viewport: {\n            left: scale(viewport.left + origin.x),\n            top: scale(viewport.top + origin.y),\n            width: scale(viewport.width),\n            height: scale(viewport.height)\n          },\n          translate: function translate(dx, dy) {\n            var x = transform.x,\n              y = transform.y,\n              k = transform.k;\n            void _this4.area.area.translate(x + invert(dx) * k, y + invert(dy) * k);\n          },\n          point: function point(x, y) {\n            var areaCoordinatesPoint = {\n              x: (origin.x - invert(x)) * transform.k,\n              y: (origin.y - invert(y)) * transform.k\n            };\n            var center = {\n              x: areaCoordinatesPoint.x + width / 2,\n              y: areaCoordinatesPoint.y + height / 2\n            };\n            void _this4.area.area.translate(center.x, center.y);\n          }\n        }\n      });\n    }\n  }]);\n}(Scope);\n\nexport { MinimapPlugin };\n\n"],
  "mappings": "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",
  "names": ["scale", "invert", "t", "_isNativeReflectConstruct", "MinimapPlugin"]
}
